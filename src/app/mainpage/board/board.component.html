<section class="board-wrapper">
  <div class="board-header">
    <h2>Board</h2>
    <div>
      <div class="search-field-wrapper">
        <label for="Find Task">Find Task</label>
        <input type="text" id="search" [ngModel]="searchText" (ngModelChange)="searchKey($event)" placeholder="Find Task" />
        <div class="border-right"></div>
        <img src="/assets/images/board/search.svg" alt="search icon" />
      </div>
      <button id="addTaskBtn">
        <span>Add Task</span>
        <img src="/assets/images/icons/add.svg" alt="add task icon">
      </button>
    </div>
  </div>
  <div class="kanban-board-container">
    <div class="toDoList">
      <div class="list-heading">
        <h3>To do</h3>
        <button class="addTaskToListBtn"><img src="/assets/images/board/add.svg" alt="add button"></button>
      </div>
      <div id="todo" cdkDropList #toDoList="cdkDropList" [cdkDropListData]="todoTasks" [cdkDropListConnectedTo]="[inProgressList, awaitFeedbackList, doneList]" (cdkDropListDropped)="drop($event)" class="tasks">
        @for (task of todoTasks; track task.id) {
        <app-compact-task cdkDrag [task]="task"></app-compact-task>
        }
          <div class="empty-list" [class.disabled]="todoTasks.length > 0">
          No tasks to do
        </div>
      </div>
    </div>
    <div class="inProgressList">
      <div class="list-heading">
        <h3>In progress</h3>
        <button class="addTaskToListBtn"><img src="/assets/images/board/add.svg" alt="add button"></button>
      </div>
      <div id="inprogress" cdkDropList #inProgressList="cdkDropList" [cdkDropListData]="inProgressTasks" [cdkDropListConnectedTo]="[toDoList, awaitFeedbackList, doneList]" (cdkDropListDropped)="drop($event)" class="tasks">
        @for (task of inProgressTasks; track task.id) {
        <app-compact-task cdkDrag [task]="task"></app-compact-task>
        }
          <div class="empty-list" [class.disabled]="inProgressTasks.length > 0">
          No tasks in progress
        </div>
      </div>
    </div>
    <div class="awaitFeedbackList">
      <div class="list-heading">
        <h3>Await feedback</h3>
        <button class="addTaskToListBtn"><img src="/assets/images/board/add.svg" alt="add button"></button>
      </div>
      <div id="awaitfeedback" cdkDropList #awaitFeedbackList="cdkDropList" [cdkDropListData]="awaitFeedbackTasks" [cdkDropListConnectedTo]="[toDoList, inProgressList, doneList]" (cdkDropListDropped)="drop($event)" class="tasks">
        @for (task of awaitFeedbackTasks; track task.id) {
        <app-compact-task cdkDrag [task]="task"></app-compact-task>
        }
          <div class="empty-list" [class.disabled]="awaitFeedbackTasks.length > 0">
          No tasks awaits feedback
        </div>
      </div>
    </div>
    <div class="doneList">
      <div class="list-heading">
        <h3>Done</h3>
      </div>
      <div id="done" cdkDropList #doneList="cdkDropList" [cdkDropListData]="doneTasks" [cdkDropListConnectedTo]="[toDoList, inProgressList, awaitFeedbackList]" (cdkDropListDropped)="drop($event)" class="tasks">
        @for (task of doneTasks; track task.id) {
        <app-compact-task cdkDrag [task]="task"></app-compact-task>
        }
        <div class="empty-list" [class.disabled]="doneTasks.length > 0">
          No tasks done
        </div>
      </div>
    </div>
  </div>
</section>
